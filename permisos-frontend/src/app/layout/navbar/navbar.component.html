<nav class="navbar" *ngIf="user as u">

  <!-- IZQUIERDA -->
  <div class="nav-left">
    <a routerLink="/dashboard" class="brand">
      Permisos
    </a>
  </div>

  <!-- BOTÓN HAMBURGUESA (mobile) -->
  <button class="menu-toggle" (click)="menuOpen = !menuOpen">
    ☰
  </button>

  <!-- CENTRO -->
  <div class="nav-center" [class.open]="menuOpen">

    <!-- EMPLEADO -->
    <ng-container *ngIf="auth.hasRole(['empleado', 'supervisor', 'rrhh'])">
      <a routerLink="/permisos" routerLinkActive="active" (click)="menuOpen = false">
        Mis permisos
      </a>
      <a routerLink="/permisos/crear" routerLinkActive="active" (click)="menuOpen = false">
        Solicitar permiso
      </a>
    </ng-container>

    <!-- SUPERVISOR / RRHH -->
    <ng-container *ngIf="auth.hasRole(['supervisor', 'rrhh'])">
      <a
        routerLink="/permisos/pendientes"
        routerLinkActive="active"
        (click)="menuOpen = false"
      >
        Pendientes
      </a>
    </ng-container>

    <!-- RRHH -->
    <ng-container *ngIf="u.role === 'rrhh'">
      <a
        routerLink="/permisos/usuarios"
        routerLinkActive="active"
        (click)="menuOpen = false"
      >
        Usuarios
      </a>
    </ng-container>

  </div>

  <!-- DERECHA -->
  <div class="nav-right" (clickOutside)="userMenuOpen = false">

    <button class="user-trigger" (click)="toggleUserMenu($event)">
      <div class="user-info">
        <span class="name">{{ u.name }}</span>
        <span class="role">{{ u.role }}</span>
      </div>
      <span class="chevron">▾</span>
    </button>

    <div class="user-menu" *ngIf="userMenuOpen">
      <a
        routerLink="/perfil"
        routerLinkActive="active"
        (click)="closeUserMenu()"
      >
        Mi perfil
      </a>

      <button class="logout" (click)="logout()">
        Salir
      </button>
    </div>

  </div>

</nav>